# CLAUDE.md

AI 助手在本仓库工作时的上下文指南。

## 项目概览

**雪哒 APP** 是户外滑雪社交平台，包含以下核心模块：

| 模块 | 状态 | 核心概念 |
|------|------|---------|
| 首页与发现 | 🚧 | 雪场列表、搜索、推荐 |
| 动态与社交 | 🚧 | Feed 流、发帖、关注体系 |
| 轨迹与地图 | 🚧 | GPS 采集、3D 地图、POI |
| **票务分销** | ✅ | 模板体系、日历库存、订单拆分 |
| 闲置交易 | 🚧 | 二手装备、担保交易 |
| 活动 | 🚧 | 赛事、约伴、滑雪营 |
| 用户体系 | 🚧 | 用户等级、会员权益 |

---

## 已完成模块：票务分销

### 核心架构

```
自我游票务系统 (第三方供应商)
    ↓ 每日同步
票务库 (日历库存)
    ↓ 应用模板
产品库
    ↓ 发布
雪哒APP (C端) + 分销商 (B端)
    ↓ 购买
订单管理 (拆单、核销)
```

### 四模板体系

1. **雪场模板**: 雪场介绍、设施、交通
2. **酒店模板**: 酒店信息、房型、入离时间
3. **分类模板**: 产品结构、默认内容
4. **商家模板**: 雪哒 APP 全局信息

### 关键设计原则

- **日历库存**: 库存按票务+日期存储，产品实时引用
- **连续购买拆单**: 5 天 → 1 主订单 + 5 子订单
- **极简操作**: 单个产品 2 分钟创建，批量 3 分钟 10 个

### 票务文档

- `docs/04-票务分销/运营后台设计.md` — 后台全貌
- `docs/04-票务分销/模板中心.md` — 模板配置
- `docs/04-票务分销/库存与订单.md` — 库存拆单逻辑
- `docs/04-票务分销/产品详情页.md` — C 端详情页

---

## 编辑规范

- 使用**中文**撰写内容
- 遵循**极简原则**：避免复杂配置、变量系统
- 文档更新后同步更新根目录 README 的状态标记

---

## 待补充模块

编写新模块文档时，参考票务分销的详细程度，需包含：

- 业务流程图
- 核心数据结构
- 用户操作流程
- 异常处理逻辑

---

## 工程实践备忘

### Git 同步协议

- **强制使用 SSH**: 必须使用 SSH 协议 (`git@github.com:...`) 进行代码推送。
- **原因**: 避免 macOS 环境下 HTTPS 协议触发不可见的 GUI 认证弹窗导致超时。
- **排查**: 若 git push 卡住，请检查 remote URL 设置。
